
function raptor_cores_prep_mulibs() {

    local ismultilib=$(cat /etc/pacman.conf | grep "[multilib]")

    if [[ -n $distro_libs32 ]]&&[[ $distro_libs32 == true ]];then
        echo "" >>  "/etc/pacman.conf" &&
        echo "[multilib]" >> "/etc/pacman.conf" &&
        echo "Include = /etc/pacman.d/mirrorlist" >> "/etc/pacman.conf"
        echo "enable multilib"
    fi
}

function raptor_cores_prep_pacmir() {
    test -e $raptor_packer && pacstrap /mnt - < $raptor_packer
    if [ $? -ne 0 ]; then
        echo "Error: raptor package installation failed." >&2
        exit 1
    fi
}

function craine_cores_post_config() {
    genfstab -U /mnt > /mnt/etc/fstab &&
    cp -fr $buildconf/* /mnt
    if [ $? -ne 0 ]; then
        echo "Error: raptor configuration installation failed." >&2
        exit 1
    fi
}

function raptor_cores_prep() {
    
    sleep 2 && clear
    echo "Base module installation"
    raptor_cores_prep_mulibs &&
    raptor_cores_prep_pacmir &&
    craine_cores_post_config
}