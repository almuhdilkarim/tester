
function craine_cores_post_host() {

    if [[ $hostaname ]];then
        echo "$hostaname" > /mnt/etc/hostname 
    else
        echo "$ID" > /mnt/etc/hostname 
    fi
    locale-gen
}

function craine_cores_post_bash() {
    rm -f /mnt/etc/skel/.bashrc
    rm -f /mnt/etc/skel/.bash_profile
    rm -f /mnt/etc/skel/.bash_logout
}

function raptor_cores_post_time() {
    arch-chroot /mnt ln -sf /usr/share/zoneinfo/$timezone /etc/localtime
    arch-chroot /mnt hwclock --systohc
    arch-chroot /mnt timedatectl set-ntp true
    arch-chroot /mnt timedatectl set-timezone $timezone 
}

function raptor_cores_post_user() {

    echo "create administratif user"
    arch-chroot /mnt useradd -m $username &&

    echo "grant administrator role"
    arch-chroot /mnt usermod -aG wheel $username &&
    
    echo "create user password"
    echo "#!/bin/bash" > /mnt/createuser &&
    echo "echo $username:$password | chpasswd" >> /mnt/createuser &&
    arch-chroot /mnt /bin/bash createuser &&
    rm /mnt/createuser
    sleep 3
}

function raptor_cores_post_srvc() {
    arch-chroot /mnt systemctl enable systemd-timesyncd.service
    arch-chroot /mnt systemctl enable systemd-oomd
}

function raptor_cores_post() {
    sleep 2 && clear
    echo "Base module configuration"
    craine_cores_post_bash
    craine_cores_post_host
    raptor_cores_post_time
    raptor_cores_post_user
    raptor_cores_post_srvc
    echo "Base module configured"
}